# Migration Runner Dockerfile
FROM oven/bun:1.3-alpine

WORKDIR /app

# Copy workspace configuration
COPY package.json bun.lockb* ./

# Copy packages (all dependencies)
COPY packages ./packages

# Install dependencies
RUN bun install --frozen-lockfile

# Set working directory to database package
WORKDIR /app/packages/database

# Run migrations and exit
CMD ["bun", "run", "migrate"]